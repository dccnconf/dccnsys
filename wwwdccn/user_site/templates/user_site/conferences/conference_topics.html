{% extends 'user_site/base.html' %}
{% load bootstrap4 %}

{% block title %}
  Conference #{{ conference.pk }} | DCCN
{% endblock %}

{% block header %}
  {% include 'user_site/components/navigation.html' with active='conferences' %}
{% endblock %}

{% block body %}
  <main class="container py-3">
    <div class="dccn-layout-row-lg-col">

      <div class="dccn-panel dccn-work-panel px-4 pb-4">
        <h1 class="dccn-panel-title">{{ conference.short_name }} Conference</h1>
        <h2 class="dccn-panel-subtitle">Edit Topics</h2>

        <ul class="list-group mt-4">
          {% for topic in conference.topic_set.all %}
            <li class="dccn-text-0-light list-group-item bg-light px-2 py-1 mt-1 d-flex">
              <span>{{ topic.order }}. {{ topic.name }}</span>
              <form action="{% url 'conference-topic-delete' pk=topic.pk %}" method="POST" class="ml-auto" novalidate>
                {% csrf_token %}
                <button type="submit" class="btn btn-link dccn-link dccn-text-small-light">
                  <i class="far fa-trash-alt"></i>
                </button>
              </form>
            </li>
          {% endfor %}
        </ul>

        <h3 class="dccn-text-3-light mt-4">
          Add new topic
        </h3>
        <form action="" method="POST" class="mt-3" novalidate>
          {% bootstrap_messages %}
          {% csrf_token %}
          {% bootstrap_form form show_label=False %}
          <div class="form-group row">
            <a href="{% url 'conference-details' pk=conference.pk %}" class="btn btn-outline-secondary btn-sm ml-auto mr-2">Back</a>
            <input type="submit" value="Add" class="btn btn-primary btn-sm">
          </div>
        </form>
      </div>
    </div>
  </main>
{% endblock %}

{% block script %}
  <script type="text/javascript">
    $(function () {
      $('input[name$="date"],input[name$="deadline"]').datepicker({
        {#dateFormat: "dd MM yy",#}
        dateFormat: "yy-mm-dd",
        defaultDate: "2019-01-01",
        changeYear: true,
        changeMonth: true,
      });
    });
  </script>
{% endblock %}