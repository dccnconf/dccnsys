{% extends 'chair/_submission_base.html' %}
{% load conferences_extras %}
{% load bootstrap4 %}


{#---------------------------------------------------------------------------#}
{# Main content                                                              #}
{#---------------------------------------------------------------------------#}
{% block mainPanelContent %}
<div class="dccn-panel-body">
{% include 'chair/components/submission_navigation.html' with active='reviews' %}

  <p class="text-center dccn-text-larger-light">{{ submission.title }}</p>
  <p class="text-center dccn-text-2-light mt-2">{{ submission.get_authors_display }}</p>

  <p class="mt-3">
    <span class="dccn-text-5 {% if num_reviews < num_reviews_required %}text-warning{% else %}text-success{% endif %}">
      {{ num_reviews }}/{{ num_reviews_required }}
    </span> reviews assigned
  </p>

  {% if num_reviews < num_reviews_required %}
  <form action="{% url 'chair:assign-reviewer' pk=submission.pk %}" method="POST" class="form-inline">
    {% csrf_token %}
    {% bootstrap_field assign_reviewer_form.reviewer show_label=False %}
    <button type="submit" class="btn btn-sm btn-outline-primary ml-3">Assign</button>
  </form>
  {% endif %}

  <hr>

  {% for review in reviews %}
    <p>{{ review }}</p>
  {% endfor %}

</div>
{% endblock %}


{% block script %}
<script>
// Get modal body content on modal show:
const modals = $('.modal[data-src]');
console.log(modals);
modals.on('show.bs.modal', function () {
  const thisModal = $(this);
  $(this).find('.modal-body').load(thisModal.attr('data-src'));
});
</script>
{% endblock %}
