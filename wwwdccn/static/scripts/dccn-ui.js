!function(t){const a=[{id:20,firstName:"Andrey",lastName:"Sidorov",affiliation:"Moscow State University",avatar:"../images/avatar_man.svg"},{id:21,firstName:"Ivan",lastName:"Petrov",affiliation:"Moscow Institute of Physics and Technology",avatar:"../images/avatar_man.svg"},{id:22,firstName:"Kate",lastName:"Petrova",affiliation:"Institute of Control Sciences",avatar:"../images/avatar_woman.svg"},{id:23,firstName:"Maria",lastName:"Ivanova",affiliation:"Tomsk State University",avatar:"../images/avatar_woman.svg"},{id:24,firstName:"Svetlana",lastName:"Sidorova",affiliation:"Ekaterinburg Politechnic Institute",avatar:"../images/avatar_woman.svg"}];t.fn.authorSearch=function(e){const n=this.find(".dccn-authors-search-content"),i=this.find(".dccn-action-show"),r=this.find(".dccn-action-hide"),s=this.find('input[type="search"]'),o=this.find(".dccn-authors-search-preview"),c=o.find(".dccn-placeholder"),l=o.find(".dccn-content"),d=this.find(".dccn-hidden-form"),u=this.attr("data-source"),f=t.extend({query:()=>""===u.trim()?new Promise((t,e)=>{const n=s.val().toLowerCase();setTimeout(()=>{t(a.filter(t=>t.firstName.toLowerCase().includes(n)||t.lastName.toLowerCase().includes(n)||t.affiliation.toLowerCase().includes(n)||String(t.id).includes(n)))},500)}):t.get({url:u,data:t(".dccn-authors-search-form").serialize()})},e),h=()=>{n.toggleClass("active"),i.toggleClass("d-none")},m=t=>{t.hasClass("active")||(l.toggleClass("active"),c.toggleClass("active"))},g=t=>{Swal.fire({showCancelButton:!0,showCloseButton:!0,buttonsStyling:!1,allowOutsideClick:!1,confirmButtonText:"Add author",customClass:{confirmButton:"btn btn-success btn-lg mr-1",cancelButton:"btn btn-outline-secondary btn-lg"},animation:!1,title:"Confirm add author",html:`\n<div class="dccn-authors-search-modal-item" data-user--id="${t.id}">\n  <img src="${t.avatar}">\n  <div>\n    <h4 class="dccn-text-large-light">\n      ${t.firstName} ${t.lastName}\n    </h4>\n    <p class="dccn-text-0-light text-muted">\n      ${t.affiliation}\n    </p>\n  </div>\n</div>`}).then(a=>{a.value&&(t=>{d.find('input[type="hidden"]').val(String(t.id)),console.log("Going to POST: ",d.serialize())})(t)})},v=()=>{const a=s.val().trim().toLowerCase();console.log(a),""===a?m(c):f.query().then(a=>{const e=a.map(t=>`\n  <div class="dccn-authors-search-item" \n      data-user--id="${t.id}" \n      data-user--first-name="${t.firstName}" \n      data-user--last-name="${t.lastName}" \n      data-user--avatar="${t.avatar}" \n      data-user--affiliation="${t.affiliation}">\n    <img src="${t.avatar}">\n    <div>\n      <h4 class="dccn-text-2-light">\n        ${t.firstName} ${t.lastName}\n      </h4>\n      <p class="dccn-text-small text-muted">\n        ${t.affiliation}\n      </p>\n    </div>\n  </div>`);e.length>0?(m(l),l.html(e),l.find(".dccn-authors-search-item").click(a=>{const e=a.currentTarget;g({id:t(e).attr("data-user--id"),firstName:t(e).attr("data-user--first-name"),lastName:t(e).attr("data-user--last-name"),affiliation:t(e).attr("data-user--affiliation"),avatar:t(e).attr("data-user--avatar")})})):m(c)})};i.click(h),r.click(h),s.on("input",v),s.on("propertychange",v)},t.fn.authorsEditor=function(a){const e=this.find(".dccn-authors-editor-list"),n=this.find('.dccn-hidden-form input[type="hidden"]');n.change(function(){console.log(t(this).val())});const i=()=>{const a=this.find(".dccn-authors-editor-author"),e=t.map(a,a=>t(a).attr("data-id"));n.val(String(e)),n.trigger("change")};e.sortable({revert:!0,stop:i,create:i})},t(".dccn-authors-editor").authorsEditor(),t(".dccn-authors-search").authorSearch()}(jQuery),function(t){t.fn.dccnAvatarUpdateForm=function(){var a=this;a.find('input[type="file"]').change(function(e){var n=this;if(n.files&&n.files[0]){var i=(n.files[0].size/1024).toFixed(4);if(i>500)Swal.fire({type:"warning",text:`Profile image size must be under 500KB, your file is ${i}KB`,customClass:{confirmButton:"btn btn-outline-secondary mx-2"},buttonsStyling:!1});else{var r=new FormData(a.get(0)),s=new FileReader;s.onload=function(e){Swal.fire({text:"Use this as your profile picture?",imageUrl:e.target.result,imageWidth:240,imageHeight:240,imageAlt:"new profile picture",animation:!1,showCancelButton:!0,cancelButtonText:"No",confirmButtonText:"Yes",customClass:{image:"img-fluid rounded-circle",confirmButton:"btn btn-success mx-2",cancelButton:"btn btn-outline-secondary mx-2"},buttonsStyling:!1}).then(i=>{if(i.value){var s=new XMLHttpRequest;s.open("POST",a.attr("data-target"),!0),s.onload=function(t){location.reload()},r.append("avatar",e.target.result),r.append("csrfmiddlewaretoken",t("[name=csrfmiddlewaretoken]").val()),s.send(r),t(a.attr("data-preview")).html('<div style="width: 120px; height: 120px; padding: 30px; margin: 0;"><div class="spinner-border dccn-loading-progress" style="margin: 0; padding: 0; width: 60px; height: 60px;" role="status"><span class="sr-only">Loading...</span></div></div>')}else t(n).val("")})},s.readAsDataURL(n.files[0])}}e.preventDefault()})},t(".dccn-avatar-update-form").dccnAvatarUpdateForm(),console.log("Registered Avatar update form plugin!")}(jQuery),function(t){var a=t(".dccn-scores-bar-chart");const e=["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)"],n=["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)"],i=["Technical Merit","Clarity","Relevance","Originality"];a.each((a,r)=>{const s=t(r).attr("data-scores").split(";").map(t=>t.split(",").map(t=>parseInt(t))),o=s.length,c=i.length;let l=o>0&&o<=3;if(s.forEach(t=>{l=l&&t.length==c,t.forEach(t=>{l=l&&!isNaN(t)})}),l){console.log(s);const t=math.divide(math.add(...s),o),a=[];s.forEach((t,i)=>{a.push({label:`Review #${i+1}`,data:t,backgroundColor:e[i],borderColor:n[i],borderWidth:1})}),a.push({label:"Average",data:t,backgroundColor:e[o],borderColor:n[o],type:"line",fill:!1}),new Chart(r,{type:"bar",data:{labels:i,datasets:a},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})}})}(jQuery),jQuery('[data-toggle="tooltip"]').tooltip(),function(t){t(".dccn-custom-file input.custom-file-input").change(function(){var a=t(this)[0].files[0].name;t(this).next(".custom-file-label").text(a)})}(jQuery),$(document).ready(function(){$(".current-year").text((new Date).getFullYear())});